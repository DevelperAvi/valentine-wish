<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our Story | Mary</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --rose-gold: #e5b3a3;
            --deep-blush: #ff4d6d;
            --luxury-dark: #2d131a;
            --glass: rgba(255, 255, 255, 0.9);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background: radial-gradient(circle at center, #fff5f5 0%, #fad0c4 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .progress-bar-container {
            position: fixed;
            top: 20px;
            width: 70%;
            height: 3px;
            background: rgba(0,0,0,0.05);
            border-radius: 10px;
        }

        #progress {
            width: 0%;
            height: 100%;
            background: var(--deep-blush);
            transition: width 0.5s ease;
        }

        .main-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            width: 90%;
            max-width: 450px;
            border-radius: 40px;
            padding: 35px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            text-align: center;
            border: 1px solid rgba(255,255,255,0.7);
            z-index: 10;
        }

        .img-wrapper {
            width: 100%;
            height: 250px;
            border-radius: 25px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 4px solid white;
        }

        .img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        h1 { font-family: 'Playfair Display', serif; color: var(--luxury-dark); font-size: 2rem; margin: 10px 0; }
        
        .quote-text { 
            font-size: 0.95rem; 
            color: #555; 
            min-height: 70px; 
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .btn-next { background: var(--luxury-dark); color: white; flex: 2; }
        .btn-back { background: #eee; color: #777; flex: 1; }
        
        .hidden { display: none; }

        .floating-heart {
            position: fixed;
            pointer-events: none;
            animation: fly 4s linear forwards;
        }

        @keyframes fly {
            0% { transform: translateY(100vh); opacity: 1; }
            100% { transform: translateY(-10vh); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="progress-bar-container"><div id="progress"></div></div>

    <div class="main-card">
        <div id="content">
            <div class="img-wrapper"><img src="img1.jpg" id="disp-img"></div>
            <h1 id="disp-title">Dearest Mary...</h1>
            <p class="quote-text" id="disp-quote">I've put together our favorite moments. Shall we look back?</p>
            
            <div class="btn-container" id="controls">
                <button class="btn btn-next" onclick="changeStep(1)">Begin Journey</button>
            </div>
        </div>
    </div>

    <script>
        const timeline = [
            { title: "Feb 7: Rose Day", quote: "You are the bloom that never fades in my heart.", img: "img1.jpg" },
            { title: "Feb 8: Propose Day", title2: "My Only Choice", quote: "Every day, I'd choose you over and over again.", img: "img2.jpg" },
            { title: "Feb 9: Chocolate Day", quote: "Your love is the sweetness I need to get through any day.", img: "img3.jpg" },
            { title: "Feb 10: Teddy Day", quote: "Sending you a hug that you can hold onto forever.", img: "img4.jpg" },
            { title: "Feb 11: Promise Day", quote: "I promise to be your home and your safest place.", img: "img1.jpg" },
            { title: "Feb 12: Hug Day", quote: "In your arms, the rest of the world just disappears.", img: "img2.jpg" },
            { title: "Feb 13: Kiss Day", quote: "Every kiss tells the story of how much I love you.", img: "img3.jpg" },
            { title: "Feb 14: Valentine's Day", quote: "We've seen the week... now let's talk about our future.", img: "img4.jpg" }
        ];

        let step = -1;

        function changeStep(direction) {
            step += direction;
            if (step < 0) { step = -1; resetToStart(); }
            else if (step < timeline.length) { renderUI(); }
            else { renderProposal(); }
        }

        function resetToStart() {
            document.getElementById('disp-img').src = "img1.jpg";
            document.getElementById('disp-title').innerText = "Dearest Mary...";
            document.getElementById('disp-quote').innerText = "I've put together our favorite moments. Shall we look back?";
            document.getElementById('progress').style.width = "0%";
            document.getElementById('controls').innerHTML = `<button class="btn btn-next" onclick="changeStep(1)">Begin Journey</button>`;
        }

        function renderUI() {
            const data = timeline[step];
            document.getElementById('disp-img').src = data.img;
            document.getElementById('disp-title').innerText = data.title;
            document.getElementById('disp-quote').innerText = data.quote;
            
            const progress = ((step + 1) / timeline.length) * 100;
            document.getElementById('progress').style.width = progress + "%";

            document.getElementById('controls').innerHTML = `
                <button class="btn btn-back" onclick="changeStep(-1)">Back</button>
                <button class="btn btn-next" onclick="changeStep(1)">${step === timeline.length-1 ? "Final Step" : "Next"}</button>
            `;
            spawnHeart();
        }

        function renderProposal() {
            document.getElementById('disp-title').innerText = "Marry Me?";
            document.getElementById('disp-quote').innerText = "I want every week to be as special as this one. Will you marry me?";
            document.getElementById('controls').innerHTML = `
                <button class="btn btn-next" style="background:#27ae60" onclick="celebrate()">YES!</button>
                <button class="btn btn-back" id="no-btn" onmouseover="teleport()">No</button>
            `;
        }

        function teleport() {
            const btn = document.getElementById('no-btn');
            const x = Math.random() * (window.innerWidth - 100);
            const y = Math.random() * (window.innerHeight - 50);
            btn.style.position = 'fixed';
            btn.style.left = x + 'px'; btn.style.top = y + 'px';
        }

        function celebrate() {
            document.querySelector('.main-card').innerHTML = `<h1>Forever Yours! ❤️</h1><p>I love you, Mary!</p><img src="img1.jpg" style="width:100%; border-radius:15px;">`;
            setInterval(spawnHeart, 200);
        }

        function spawnHeart() {
            const h = document.createElement('div');
            h.className = 'floating-heart';
            h.innerHTML = '❤️';
            h.style.left = Math.random() * 100 + 'vw';
            h.style.fontSize = (Math.random() * 20 + 20) + 'px';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 4000);
        }
    </script>
</body>
</html>
